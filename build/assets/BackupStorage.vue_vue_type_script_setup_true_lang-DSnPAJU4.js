import{u as D,c as q,P as E,a as te,b as ne}from"./usePrimitiveElement-CgzIm-HW.js";import{u as Z,a as se}from"./index-Cc0VYeQ3.js";import{i as le}from"./nullish-CHIgUVhi.js";import{i as F,u as re,a as S}from"./useId-CbG86c7z.js";import{c as k,d as g,s as ee,h as m,o as f,w as c,r as h,u as a,A as ie,v as R,H as de,G as ue,y as ce,e as x,m as T,k as N,B as pe,C as fe,b as j,I as me,D as ve,x as ye,a as W,F as _e,q as be,i as Y,t as he}from"./app-DP28Mstu.js";import{c as U}from"./utils-BSfSTJJn.js";import{P as ge}from"./Collection-Cd6XSlzf.js";import{C as Ce}from"./chevron-up-BYpCT4jK.js";import{_ as ke}from"./index-BAM79J8k.js";import{_ as we}from"./Button.vue_vue_type_script_setup_true_lang-BSeTgO86.js";import{_ as Ae}from"./DialogFooter.vue_vue_type_script_setup_true_lang-Aedn_SEp.js";import{_ as Be}from"./FtpConnection.vue_vue_type_script_setup_true_lang-DqzfE8Wm.js";import{_ as Ve}from"./LocalConnection.vue_vue_type_script_setup_true_lang-CKkl_IhQ.js";import{_ as $e}from"./S3Connection.vue_vue_type_script_setup_true_lang-wVLrz1mn.js";import{_ as xe}from"./SftpConnection.vue_vue_type_script_setup_true_lang-DAaJW_n0.js";function Ie(o,s){return le(o)?!1:Array.isArray(o)?o.some(t=>F(t,s)):F(o,s)}function Oe({type:o,defaultValue:s,modelValue:t}){const e=t||s;return t!==void 0||s!==void 0?Array.isArray(e)?"multiple":"single":o??"single"}function De({type:o,defaultValue:s,modelValue:t}){return o||Oe({type:o,defaultValue:s,modelValue:t})}function Pe({type:o,defaultValue:s}){return s!==void 0?s:o==="single"?void 0:[]}function Ne(o,s){const t=k(()=>De(o)),e=Z(o,"modelValue",s,{defaultValue:Pe(o),passive:o.modelValue===void 0,deep:!0});function n(i){if(t.value==="single")e.value=F(i,e.value)?void 0:i;else{const l=Array.isArray(e.value)?[...e.value||[]]:[e.value].filter(Boolean);if(Ie(l,i)){const d=l.findIndex(v=>F(v,i));l.splice(d,1)}else l.push(i);e.value=l}}const r=k(()=>t.value==="single");return{modelValue:e,changeModelValue:n,isSingle:r}}const[H,Re]=q("AccordionRoot"),Ee=g({__name:"AccordionRoot",props:{collapsible:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},dir:{},orientation:{default:"vertical"},unmountOnHide:{type:Boolean,default:!0},asChild:{type:Boolean},as:{},type:{},modelValue:{},defaultValue:{}},emits:["update:modelValue"],setup(o,{emit:s}){const t=o,e=s,{dir:n,disabled:r,unmountOnHide:i}=ee(t),l=re(n),{modelValue:d,changeModelValue:v,isSingle:p}=Ne(t,e),{forwardRef:y,currentElement:_}=D();return Re({disabled:r,direction:l,orientation:t.orientation,parentElement:_,isSingle:p,collapsible:t.collapsible,modelValue:d,changeModelValue:v,unmountOnHide:i}),(w,u)=>(f(),m(a(E),{ref:a(y),"as-child":w.asChild,as:w.as},{default:c(()=>[h(w.$slots,"default",{modelValue:a(d)})]),_:3},8,["as-child","as"]))}}),[ae,Fe]=q("CollapsibleRoot"),Te=g({__name:"CollapsibleRoot",props:{defaultOpen:{type:Boolean,default:!1},open:{type:Boolean,default:void 0},disabled:{type:Boolean},unmountOnHide:{type:Boolean,default:!0},asChild:{type:Boolean},as:{}},emits:["update:open"],setup(o,{expose:s,emit:t}){const e=o,r=Z(e,"open",t,{defaultValue:e.defaultOpen,passive:e.open===void 0}),{disabled:i,unmountOnHide:l}=ee(e);return Fe({contentId:"",disabled:i,open:r,unmountOnHide:l,onOpenToggle:()=>{r.value=!r.value}}),s({open:r}),D(),(d,v)=>(f(),m(a(E),{as:d.as,"as-child":e.asChild,"data-state":a(r)?"open":"closed","data-disabled":a(i)?"":void 0},{default:c(()=>[h(d.$slots,"default",{open:a(r)})]),_:3},8,["as","as-child","data-state","data-disabled"]))}}),He=["INPUT","TEXTAREA"];function Me(o,s,t,e={}){if(!s||e.enableIgnoredElement&&He.includes(s.nodeName))return null;const{arrowKeyOptions:n="both",attributeName:r="[data-reka-collection-item]",itemsArray:i=[],loop:l=!0,dir:d="ltr",preventScroll:v=!0,focus:p=!1}=e,[y,_,w,u,C,B]=[o.key==="ArrowRight",o.key==="ArrowLeft",o.key==="ArrowUp",o.key==="ArrowDown",o.key==="Home",o.key==="End"],V=w||u,P=y||_;if(!C&&!B&&(!V&&!P||n==="vertical"&&P||n==="horizontal"&&V))return null;const I=t?Array.from(t.querySelectorAll(r)):i;if(!I.length)return null;v&&o.preventDefault();let $=null;return P||V?$=oe(I,s,{goForward:V?u:d==="ltr"?y:_,loop:l}):C?$=I.at(0)||null:B&&($=I.at(-1)||null),p&&($==null||$.focus()),$}function oe(o,s,t,e=o.length){if(--e===0)return null;const n=o.indexOf(s),r=t.goForward?n+1:n-1;if(!t.loop&&(r<0||r>=o.length))return null;const i=(r+o.length)%o.length,l=o[i];return l?l.hasAttribute("disabled")&&l.getAttribute("disabled")!=="false"?oe(o,l,t,e):l:null}const[K,je]=q("AccordionItem"),qe=g({__name:"AccordionItem",props:{disabled:{type:Boolean},value:{},unmountOnHide:{type:Boolean},asChild:{type:Boolean},as:{}},setup(o,{expose:s}){const t=o,e=H(),n=k(()=>e.isSingle.value?t.value===e.modelValue.value:Array.isArray(e.modelValue.value)&&e.modelValue.value.includes(t.value)),r=k(()=>e.disabled.value||t.disabled),i=k(()=>r.value?"":void 0),l=k(()=>n.value?"open":"closed");s({open:n,dataDisabled:i});const{currentRef:d,currentElement:v}=D();je({open:n,dataState:l,disabled:r,dataDisabled:i,triggerId:"",currentRef:d,currentElement:v,value:k(()=>t.value)});function p(y){var C;const _=y.target;if(Array.from(((C=e.parentElement.value)==null?void 0:C.querySelectorAll("[data-reka-collection-item]"))??[]).findIndex(B=>B===_)===-1)return null;Me(y,v.value,e.parentElement.value,{arrowKeyOptions:e.orientation,dir:e.direction.value,focus:!0})}return(y,_)=>(f(),m(a(Te),{"data-orientation":a(e).orientation,"data-disabled":i.value,"data-state":l.value,disabled:r.value,open:n.value,as:t.as,"as-child":t.asChild,"unmount-on-hide":a(e).unmountOnHide.value,onKeydown:ie(p,["up","down","left","right","home","end"])},{default:c(()=>[h(y.$slots,"default",{open:n.value})]),_:3},8,["data-orientation","data-disabled","data-state","disabled","open","as","as-child","unmount-on-hide"]))}}),Ue=g({inheritAttrs:!1,__name:"CollapsibleContent",props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["contentFound"],setup(o,{emit:s}){const t=o,e=s,n=ae();n.contentId||(n.contentId=S(void 0,"reka-collapsible-content"));const r=R(),{forwardRef:i,currentElement:l}=D(),d=R(0),v=R(0),p=k(()=>n.open.value),y=R(p.value),_=R();de(()=>{var u;return[p.value,(u=r.value)==null?void 0:u.present]},async()=>{await ue();const u=l.value;if(!u)return;_.value=_.value||{transitionDuration:u.style.transitionDuration,animationName:u.style.animationName},u.style.transitionDuration="0s",u.style.animationName="none";const C=u.getBoundingClientRect();v.value=C.height,d.value=C.width,y.value||(u.style.transitionDuration=_.value.transitionDuration,u.style.animationName=_.value.animationName)},{immediate:!0});const w=k(()=>y.value&&n.open.value);return ce(()=>{requestAnimationFrame(()=>{y.value=!1})}),se(l,"beforematch",u=>{requestAnimationFrame(()=>{n.onOpenToggle(),e("contentFound")})}),(u,C)=>(f(),m(a(ge),{ref_key:"presentRef",ref:r,present:u.forceMount||a(n).open.value,"force-mount":!0},{default:c(({present:B})=>{var V;return[x(a(E),T(u.$attrs,{id:a(n).contentId,ref:a(i),"as-child":t.asChild,as:u.as,hidden:B?void 0:a(n).unmountOnHide.value?"":"until-found","data-state":w.value?void 0:a(n).open.value?"open":"closed","data-disabled":(V=a(n).disabled)!=null&&V.value?"":void 0,style:{"--reka-collapsible-content-height":`${v.value}px`,"--reka-collapsible-content-width":`${d.value}px`}}),{default:c(()=>[!a(n).unmountOnHide.value||B?h(u.$slots,"default",{key:0}):N("",!0)]),_:2},1040,["id","as-child","as","hidden","data-state","data-disabled","style"])]}),_:3},8,["present"]))}}),Ke=g({__name:"AccordionContent",props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{}},setup(o){const s=o,t=H(),e=K();return D(),(n,r)=>(f(),m(a(Ue),{role:"region","as-child":s.asChild,as:n.as,"force-mount":s.forceMount,"aria-labelledby":a(e).triggerId,"data-state":a(e).dataState.value,"data-disabled":a(e).dataDisabled.value,"data-orientation":a(t).orientation,style:{"--reka-accordion-content-width":"var(--reka-collapsible-content-width)","--reka-accordion-content-height":"var(--reka-collapsible-content-height)"},onContentFound:r[0]||(r[0]=i=>a(t).changeModelValue(a(e).value.value))},{default:c(()=>[h(n.$slots,"default")]),_:3},8,["as-child","as","force-mount","aria-labelledby","data-state","data-disabled","data-orientation"]))}}),ze=g({__name:"AccordionHeader",props:{asChild:{type:Boolean},as:{default:"h3"}},setup(o){const s=o,t=H(),e=K();return D(),(n,r)=>(f(),m(a(E),{as:s.as,"as-child":s.asChild,"data-orientation":a(t).orientation,"data-state":a(e).dataState.value,"data-disabled":a(e).dataDisabled.value},{default:c(()=>[h(n.$slots,"default")]),_:3},8,["as","as-child","data-orientation","data-state","data-disabled"]))}}),Le=g({__name:"CollapsibleTrigger",props:{asChild:{type:Boolean},as:{default:"button"}},setup(o){const s=o;D();const t=ae();return(e,n)=>{var r,i;return f(),m(a(E),{type:e.as==="button"?"button":void 0,as:e.as,"as-child":s.asChild,"aria-controls":a(t).contentId,"aria-expanded":a(t).open.value,"data-state":a(t).open.value?"open":"closed","data-disabled":(r=a(t).disabled)!=null&&r.value?"":void 0,disabled:(i=a(t).disabled)==null?void 0:i.value,onClick:a(t).onOpenToggle},{default:c(()=>[h(e.$slots,"default")]),_:3},8,["type","as","as-child","aria-controls","aria-expanded","data-state","data-disabled","disabled","onClick"])}}}),Ge=g({__name:"AccordionTrigger",props:{asChild:{type:Boolean},as:{}},setup(o){const s=o,t=H(),e=K();e.triggerId||(e.triggerId=S(void 0,"reka-accordion-trigger"));function n(){const r=t.isSingle.value&&e.open.value&&!t.collapsible;e.disabled.value||r||t.changeModelValue(e.value.value)}return(r,i)=>(f(),m(a(Le),{id:a(e).triggerId,ref:a(e).currentRef,"data-reka-collection-item":"",as:s.as,"as-child":s.asChild,"aria-disabled":a(e).disabled.value||void 0,"aria-expanded":a(e).open.value||!1,"data-disabled":a(e).dataDisabled.value,"data-orientation":a(t).orientation,"data-state":a(e).dataState.value,disabled:a(e).disabled.value,onClick:n},{default:c(()=>[h(r.$slots,"default")]),_:3},8,["id","as","as-child","aria-disabled","aria-expanded","data-disabled","data-orientation","data-state","disabled"]))}}),Xe=g({__name:"Accordion",props:{collapsible:{type:Boolean},disabled:{type:Boolean},dir:{},orientation:{},unmountOnHide:{type:Boolean},asChild:{type:Boolean},as:{},type:{},modelValue:{},defaultValue:{}},emits:["update:modelValue"],setup(o,{emit:s}){const n=te(o,s);return(r,i)=>(f(),m(a(Ee),pe(fe(a(n))),{default:c(()=>[h(r.$slots,"default")]),_:3},16))}}),Je=g({__name:"AccordionContent",props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(o){const s=o,t=k(()=>{const{class:e,...n}=s;return n});return(e,n)=>(f(),m(a(Ke),T(t.value,{class:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down"}),{default:c(()=>[j("div",{class:me(a(U)("pb-4 pt-0",s.class))},[h(e.$slots,"default")],2)]),_:3},16))}}),Qe=g({__name:"AccordionItem",props:{disabled:{type:Boolean},value:{},unmountOnHide:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(o){const s=o,t=k(()=>{const{class:n,...r}=s;return r}),e=ne(t);return(n,r)=>(f(),m(a(qe),T(a(e),{class:a(U)("border-b",s.class)}),{default:c(()=>[h(n.$slots,"default")]),_:3},16,["class"]))}}),We=g({__name:"AccordionTrigger",props:{asChild:{type:Boolean},as:{},class:{}},setup(o){const s=o,t=k(()=>{const{class:e,...n}=s;return n});return(e,n)=>(f(),m(a(ze),{class:"flex"},{default:c(()=>[x(a(Ge),T(t.value,{class:a(U)("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",s.class)}),{default:c(()=>[h(e.$slots,"default"),h(e.$slots,"icon",{},()=>[x(a(Ce),{class:"h-4 w-4 shrink-0 transition-transform duration-200"})])]),_:3},16,["class"])]),_:3}))}}),Ye={class:"flex items-center justify-start"},fa=g({__name:"BackupStorage",emits:["onClose"],setup(o,{emit:s}){var _,w,u,C,B,V,P,I,$,M,z,L,G,X,J;const t=s;let n=ve().props.backup_storage_setting;Array.isArray(n)||(console.warn("⚠️ props.backup_storage_setting is not an array:",n),n=[]);const[r={enabled:!1,config:{}},i={},l={},d={}]=n;function v(Q,b){const A=parseInt(Q,10);return Number.isNaN(A)?b:A}const p=ye({connections:[{title:"سرور محلی (Local)",key:"local",enabled:!!r.enabled,config:{}},{title:"سرور ریموت (FTP)",key:"ftp",enabled:!!i.enabled,config:{host:((_=i==null?void 0:i.config)==null?void 0:_.host)||"",port:v((w=i==null?void 0:i.config)==null?void 0:w.port,21),username:((u=i==null?void 0:i.config)==null?void 0:u.username)||"",password:((C=i==null?void 0:i.config)==null?void 0:C.password)||""}},{title:"سرور ریموت (SFTP)",key:"sftp",enabled:!!l.enabled,config:{host:((B=l==null?void 0:l.config)==null?void 0:B.host)||"",port:v((V=l==null?void 0:l.config)==null?void 0:V.port,22),username:((P=l==null?void 0:l.config)==null?void 0:P.username)||"",password:((I=l==null?void 0:l.config)==null?void 0:I.password)||"",ssh_key:(($=l==null?void 0:l.config)==null?void 0:$.ssh_key)||"",auth_by:((M=l==null?void 0:l.config)==null?void 0:M.auth_by)||"password"}},{title:"سرور ریموت (S3)",key:"s3",enabled:!!d.enabled,config:{region:((z=d==null?void 0:d.config)==null?void 0:z.region)||"",bucket:((L=d==null?void 0:d.config)==null?void 0:L.bucket)||"",endpoint:((G=d==null?void 0:d.config)==null?void 0:G.endpoint)||"",access_key:((X=d==null?void 0:d.config)==null?void 0:X.access_key)||"",secret_key:((J=d==null?void 0:d.config)==null?void 0:J.secret_key)||""}}]});function y(){p.post(route("admin.backup.setting.storage"),{onSuccess:()=>{t("onClose")}})}return(Q,b)=>(f(),W("div",null,[x(a(Xe),{type:"single",class:"w-full",collapsible:""},{default:c(()=>[(f(!0),W(_e,null,be(a(p).connections,A=>(f(),m(a(Qe),{key:A.key,value:A.key},{default:c(()=>[x(a(We),null,{default:c(()=>[j("div",Ye,[j("span",null,he(A.title),1),A.enabled?(f(),m(a(ke),{key:0,class:"mr-2 text-[9px]"},{default:c(()=>b[4]||(b[4]=[Y("فعال")])),_:1})):N("",!0)])]),_:2},1024),x(a(Je),{class:"mb-2 rounded-md bg-gray-100 p-2"},{default:c(()=>[A.key==="local"?(f(),m(Ve,{key:0,modelValue:a(p).connections[0],"onUpdate:modelValue":b[0]||(b[0]=O=>a(p).connections[0]=O)},null,8,["modelValue"])):N("",!0),A.key==="ftp"?(f(),m(Be,{key:1,modelValue:a(p).connections[1],"onUpdate:modelValue":b[1]||(b[1]=O=>a(p).connections[1]=O)},null,8,["modelValue"])):N("",!0),A.key==="sftp"?(f(),m(xe,{key:2,modelValue:a(p).connections[2],"onUpdate:modelValue":b[2]||(b[2]=O=>a(p).connections[2]=O)},null,8,["modelValue"])):N("",!0),A.key==="s3"?(f(),m($e,{key:3,modelValue:a(p).connections[3],"onUpdate:modelValue":b[3]||(b[3]=O=>a(p).connections[3]=O)},null,8,["modelValue"])):N("",!0)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1}),x(a(Ae),{class:"mt-6"},{default:c(()=>[x(a(we),{variant:"default",onClick:y,loading:a(p).processing},{default:c(()=>b[5]||(b[5]=[Y(" ذخیره کردن")])),_:1},8,["loading"])]),_:1})]))}});export{fa as _};
