import{p as U,i as _,b as x}from"./index-Cc0VYeQ3.js";import{v as M,H as I,G as D,E as k,c as S,d as O,s as L,Y as $,Z as b,_ as F,$ as j,M as q,a0 as z}from"./app-DP28Mstu.js";import{r as B,d as w,S as P}from"./usePrimitiveElement-CgzIm-HW.js";function V(n,t){const l=M(n);function u(m){return t[l.value][m]??l.value}return{state:l,dispatch:m=>{l.value=u(m)}}}function Y(n,t){var h;const l=M({}),u=M("none"),o=M(n),m=n.value?"mounted":"unmounted";let v;const r=((h=t.value)==null?void 0:h.ownerDocument.defaultView)??U,{state:f,dispatch:c}=V(m,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}}),a=i=>{var s;if(_){const N=new CustomEvent(i,{bubbles:!1,cancelable:!1});(s=t.value)==null||s.dispatchEvent(N)}};I(n,async(i,s)=>{var T;const N=s!==i;if(await D(),N){const C=u.value,A=g(t.value);i?(c("MOUNT"),a("enter"),A==="none"&&a("after-enter")):A==="none"||A==="undefined"||((T=l.value)==null?void 0:T.display)==="none"?(c("UNMOUNT"),a("leave"),a("after-leave")):s&&C!==A?(c("ANIMATION_OUT"),a("leave")):(c("UNMOUNT"),a("after-leave"))}},{immediate:!0});const e=i=>{const s=g(t.value),N=s.includes(i.animationName),T=f.value==="mounted"?"enter":"leave";if(i.target===t.value&&N&&(a(`after-${T}`),c("ANIMATION_END"),!o.value)){const C=t.value.style.animationFillMode;t.value.style.animationFillMode="forwards",v=r==null?void 0:r.setTimeout(()=>{var A;((A=t.value)==null?void 0:A.style.animationFillMode)==="forwards"&&(t.value.style.animationFillMode=C)})}i.target===t.value&&s==="none"&&c("ANIMATION_END")},p=i=>{i.target===t.value&&(u.value=g(t.value))},E=I(t,(i,s)=>{i?(l.value=getComputedStyle(i),i.addEventListener("animationstart",p),i.addEventListener("animationcancel",e),i.addEventListener("animationend",e)):(c("ANIMATION_END"),v!==void 0&&(r==null||r.clearTimeout(v)),s==null||s.removeEventListener("animationstart",p),s==null||s.removeEventListener("animationcancel",e),s==null||s.removeEventListener("animationend",e))},{immediate:!0}),d=I(f,()=>{const i=g(t.value);u.value=f.value==="mounted"?i:"none"});return k(()=>{E(),d()}),{isPresent:S(()=>["mounted","unmountSuspended"].includes(f.value))}}function g(n){return n&&getComputedStyle(n).animationName||"none"}const J=O({name:"Presence",props:{present:{type:Boolean,required:!0},forceMount:{type:Boolean}},slots:{},setup(n,{slots:t,expose:l}){var c;const{present:u,forceMount:o}=L(n),m=M(),{isPresent:v}=Y(u,m);l({present:v});let r=t.default({present:v.value});r=B(r||[]);const f=$();if(r&&(r==null?void 0:r.length)>1){const a=(c=f==null?void 0:f.parent)!=null&&c.type.name?`<${f.parent.type.name} />`:"component";throw new Error([`Detected an invalid children for \`${a}\` for  \`Presence\` component.`,"","Note: Presence works similarly to `v-if` directly, but it waits for animation/transition to finished before unmounting. So it expect only one direct child of valid VNode type.","You can apply a few solutions:",["Provide a single child element so that `presence` directive attach correctly.","Ensure the first child is an actual element instead of a raw text node or comment node."].map(e=>`  - ${e}`).join(`
`)].join(`
`))}return()=>o.value||u.value||v.value?b(t.default({present:v.value})[0],{ref:a=>{const e=x(a);return typeof(e==null?void 0:e.hasAttribute)>"u"||(e!=null&&e.hasAttribute("data-reka-popper-content-wrapper")?m.value=e.firstElementChild:m.value=e),e}}):null}});function Q(n,t,l){const u=l.originalEvent.target,o=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:l});t&&u.addEventListener(n,t,{once:!0}),u.dispatchEvent(o)}function X(){let n=document.activeElement;if(n==null)return null;for(;n!=null&&n.shadowRoot!=null&&n.shadowRoot.activeElement!=null;)n=n.shadowRoot.activeElement;return n}const R="data-reka-collection-item";function W(n={}){const{key:t="",isProvider:l=!1}=n,u=`${t}CollectionProvider`;let o;if(l){const a=M(new Map);o={collectionRef:M(),itemMap:a},F(u,o)}else o=j(u);const m=(a=!1)=>{const e=o.collectionRef.value;if(!e)return[];const p=Array.from(e.querySelectorAll(`[${R}]`)),d=Array.from(o.itemMap.value.values()).sort((y,h)=>p.indexOf(y.ref)-p.indexOf(h.ref));return a?d:d.filter(y=>y.ref.dataset.disabled!=="")},v=O({name:"CollectionSlot",setup(a,{slots:e}){const{primitiveElement:p,currentElement:E}=w();return I(E,()=>{o.collectionRef.value=E.value}),()=>b(P,{ref:p},e)}}),r=O({name:"CollectionItem",inheritAttrs:!1,props:{value:{validator:()=>!0}},setup(a,{slots:e,attrs:p}){const{primitiveElement:E,currentElement:d}=w();return q(y=>{if(d.value){const h=z(d.value);o.itemMap.value.set(h,{ref:d.value,value:a.value}),y(()=>o.itemMap.value.delete(h))}}),()=>b(P,{...p,[R]:"",ref:E},e)}}),f=S(()=>Array.from(o.itemMap.value.values())),c=S(()=>o.itemMap.value.size);return{getItems:m,reactiveItems:f,itemMapSize:c,CollectionSlot:v,CollectionItem:r}}export{J as P,X as g,Q as h,W as u};
